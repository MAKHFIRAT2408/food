# Доставка еды — проект

**Система доставки еды на FastAPI**  
**Курсовая работа**

**Тема:** Разработка RESTful API-приложения для сервиса доставки еды (пользователи, рестораны, блюда, заказы, авторизация) на FastAPI  

**Автор:** Саидова М. М.  
**Группа:** 4-400102  
**Руководитель:** Иномов Б. Б.  
**Год:** 2025

---

## О проекте

Данный проект представляет собой **RESTful API-приложение**, предназначенное для автоматизации процессов онлайн-доставки еды.

Система реализована с использованием современного фреймворка **FastAPI** и обеспечивает удобное взаимодействие между пользователями, ресторанами и сервисом оформления заказов.

Приложение ориентировано на использование в качестве **серверной части** (backend) для веб- или мобильного приложения службы доставки еды.

---

## Основной функционал

Приложение предоставляет следующие возможности:

- Регистрация и аутентификация пользователей
- Разграничение прав доступа (**пользователь / администратор / курьер**)
- Управление ресторанами и меню (создание, редактирование, просмотр, удаление)
- Просмотр списка доступных блюд с фотографиями
- Оформление заказов на доставку еды
- Работа с корзиной (добавление, удаление, очистка)
- Просмотр истории заказов пользователя
- Логика доставки: курьер берёт заказ → отмечает доставку → клиент подтверждает получение
- Автоматическая обработка данных через REST API
- Доступ к интерактивной документации API (Swagger UI и ReDoc)

---

## Используемые технологии

| Технология               | Назначение                                      |
|--------------------------|-------------------------------------------------|
| **FastAPI**              | Основной фреймворк для разработки API           |
| **SQLAlchemy**           | ORM для работы с базой данных                   |
| **SQLite**               | Система управления базами данных                |
| **Pydantic**             | Валидация и сериализация данных                 |
| **JWT (python-jose)**    | Механизм аутентификации и авторизации           |
| **Passlib + bcrypt**     | Хэширование паролей                             |
| **Uvicorn**              | ASGI-сервер для запуска приложения              |
| **python-multipart**     | Обработка загрузки файлов (фото блюд)           |

---

## Возможности API

### Аутентификация
- `POST /auth/register` — регистрация пользователя
- `POST /auth/login` — вход в систему и получение JWT-токена

### Пользователи
- `GET /igrok/profil` — получение информации о текущем пользователе (или аналог для пользователей)

### Рестораны
- `GET /restorany/` — просмотр списка ресторанов
- `POST /restorany/` — создание ресторана (**только администратор**)

### Блюда
- `GET /blyuda/` — просмотр всех блюд (с фильтром по ресторану)
- `POST /blyuda/` — добавление блюда с фото (**только администратор**)
- `PUT /blyuda/{id}` — обновление блюда (название, цена, описание, ресторан, фото)
- `PUT /blyuda/{id}/foto` — замена только фото

### Заказы и корзина
- `GET /zakazy/korzina` — просмотр текущей корзины
- `POST /zakazy/korzina/dobavit` — добавить блюдо в корзину
- `DELETE /zakazy/korzina/ochistit` — очистить корзину
- `POST /zakazy/oformit` — оформить заказ (указать адрес доставки)
- `GET /zakazy/` — просмотр истории заказов пользователя

### Для курьеров
- `GET /zakazy/dostupnye-dlya-dostavki` — список оформленных заказов
- `POST /zakazy/{id}/vzyat-v-dostavku` — взять заказ
- `POST /zakazy/{id}/dostavlen-kurerom` — отметить доставку
- `GET /zakazy/moi-zakazy` — мои текущие заказы

### Для клиента
- `POST /zakazy/{id}/podtverdit-poluchenie` — подтвердить получение заказа

---

## Документация API

После запуска приложения доступна **интерактивная документация**:

- **Swagger UI**: http://127.0.0.1:8000/docs  
- **ReDoc**: http://127.0.0.1:8000/redoc

Все эндпоинты можно тестировать прямо в браузере.

---

## Как стать администратором

После первой регистрации:

1. Зарегистрируйтесь через `/auth/register`
2. Остановите сервер
3. Откройте файл базы данных `food.db` в программе **DB Browser for SQLite**
4. Перейдите во вкладку **Browse Data** → таблица `polzovateli`
5. Найдите свою запись и измените поле `rol` на значение `admin`
6. Сохраните изменения и перезапустите сервер

Теперь у вас будут права администратора (создание ресторанов, блюд и т.д.).

> Аналогично можно назначить роль `kurer` для тестирования доставки.

---

## Как запустить проект локально

### Требования
- Python 3.10 или выше
- Git
- (опционально) DB Browser for SQLite

### Пошаговая инструкция

```bash
# 1. Клонировать репозиторий
git clone https://github.com/ВАШ_ЛОГИН/food-delivery-api.git
cd food-delivery-api

# 2. Создать виртуальное окружение
python -m venv venv

# 3. Активировать окружение
# Windows:
venv\Scripts\activate
# Linux / macOS:
source venv/bin/activate

# 4. Установить зависимости
pip install -r requirements.txt

# 5. Запустить сервер
uvicorn main:app --reload --port 8001
